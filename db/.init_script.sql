-- Tables
-- Ensure that tables are dropped before creating them
DROP TABLE IF EXISTS public."MATRICULAS";
DROP TABLE IF EXISTS public."CLIENTES";
DROP TABLE IF EXISTS public."DEPORTES";

-- Create tables
CREATE TABLE IF NOT EXISTS public."CLIENTES" (NOMBRE text NOT NULL, DNI text NOT NULL, FNAC date, TELEFONO text, PRIMARY KEY (DNI));
ALTER TABLE IF EXISTS public."CLIENTES" OWNER to admin;

CREATE TABLE IF NOT EXISTS public."DEPORTES" (NOMBRE text NOT NULL, PRECIO numeric NOT NULL, PRIMARY KEY (NOMBRE));
ALTER TABLE IF EXISTS public."DEPORTES" OWNER to admin;

CREATE TABLE IF NOT EXISTS public."MATRICULAS" (DNI text NOT NULL, DEPORTE TEXT NOT NULL, HORARIO TEXT NOT NULL, PRIMARY KEY (DNI, DEPORTE), FOREIGN KEY (DNI) REFERENCES public."CLIENTES"(DNI) ON DELETE CASCADE, FOREIGN KEY (DEPORTE) REFERENCES public."DEPORTES"(NOMBRE) ON DELETE CASCADE);
ALTER TABLE IF EXISTS public."MATRICULAS" OWNER to admin;

-- Initial data
INSERT INTO public."CLIENTES" VALUES ('Manolo', '12345678A', '1990-01-01', '666666666');
INSERT INTO public."CLIENTES" VALUES ('Joserra', '87654321B', '2002-02-02', '+34555555555');
INSERT INTO public."CLIENTES" VALUES ('Lali', '12345678C', '1992-03-03', '+34 444444444');
INSERT INTO public."CLIENTES" VALUES ('Edu', '87654321D', '2004-04-04', '+34 333333333');
INSERT INTO public."CLIENTES" VALUES ('Lola', '12345678E', '1994-05-05', '+34 222222222');
INSERT INTO public."CLIENTES" VALUES ('Mini', '87654321F', '2006-06-06', '+34 111111111');
INSERT INTO public."CLIENTES" VALUES ('Paco', '12345678G', '1996-07-07', '+34 000000000');
INSERT INTO public."CLIENTES" VALUES ('Pepe', '87654321H', '2008-08-08', '+34 999999999');
INSERT INTO public."CLIENTES" VALUES ('Carlos', '12345678I', '1998-09-09', '+34 888888888');

INSERT INTO public."DEPORTES" VALUES ('tenis', 20);
INSERT INTO public."DEPORTES" VALUES ('natación', 15);
INSERT INTO public."DEPORTES" VALUES ('atletismo', 10);
INSERT INTO public."DEPORTES" VALUES ('baloncesto', 15);
INSERT INTO public."DEPORTES" VALUES ('futbol', 15);

INSERT INTO public."MATRICULAS" VALUES ('12345678A', 'tenis', 'mañana');
INSERT INTO public."MATRICULAS" VALUES ('12345678A', 'natación', 'tarde');
INSERT INTO public."MATRICULAS" VALUES ('87654321B', 'atletismo', 'mañana');
INSERT INTO public."MATRICULAS" VALUES ('87654321B', 'baloncesto', 'tarde');
INSERT INTO public."MATRICULAS" VALUES ('87654321B', 'futbol', 'tarde');
INSERT INTO public."MATRICULAS" VALUES ('12345678C', 'tenis', 'mañana');
INSERT INTO public."MATRICULAS" VALUES ('12345678C', 'natación', 'tarde');
INSERT INTO public."MATRICULAS" VALUES ('87654321D', 'atletismo', 'mañana');
INSERT INTO public."MATRICULAS" VALUES ('87654321F', 'atletismo', 'mañana');
INSERT INTO public."MATRICULAS" VALUES ('12345678G', 'tenis', 'mañana');
